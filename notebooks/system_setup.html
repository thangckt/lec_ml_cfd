
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Setting up your system &#8212; Machine learning in computational fluid dynamics</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="https://github.com/thangckt/note/blob/main/docs/1images/one-note-128-y.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="End-to-end simulations in OpenFOAM and Basilisk" href="cfd_intro_exercise.html" />
    <link rel="prev" title="A brief introduction to Python programming" href="python_intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Machine learning in computational fluid dynamics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Machine learning in computational fluid dynamics
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="ml_cfd_intro.html">
   Course overview and motivation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cfd_intro.html">
   Finite-volume-based CFD in a nutshell
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ml_intro.html">
   Introduction to machine learning
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bubble_path_classification.html">
   Predicting the stability regime of rising bubbles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mass_transfer_regression.html">
   Computing highly accurate mass transfer at rising bubbles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_pinn.html">
   Approximating the flow past a cylinder with limited data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coherent_structures_dim_reduction.html">
   Analyzing coherent structures in flows displaying transonic buffets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_rom.html">
   Reduced-order modeling of the flow past a cylinder
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_bayesian_opt.html">
   Optimizing parameters for open-loop flow control
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_drl.html">
   Controlling the flow past a cylinder
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Exercises
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="python_intro.html">
   A brief introduction to Python programming
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Setting up your system
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cfd_intro_exercise.html">
   End-to-end simulations in OpenFOAM and Basilisk
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ml_intro_exercise.html">
   End-to-end ML project with OpenFOAM and PyTorch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bubble_path_classification_exercise.html">
   Predicting the stability regime of rising bubbles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mass_transfer_regression_exercise.html">
   Computing highly accurate mass transfer at rising bubbles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_pinn_exercise.html">
   Approximating the flow past a cylinder with limited data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="coherent_structures_dim_reduction_exercise.html">
   Analyzing coherent structures in flows displaying transonic buffets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_rom_exercise.html">
   Reduced-order modeling of the flow past a cylinder in flowTorch
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_bayesian_opt_exercise.html">
   Open-loop control of the flow past a cylinder
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cylinder_drl_exercise.html">
   Controlling the flow past a cylinder with OpenFOAM and PyTorch
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown menu-dropdown-launch-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Launch interactive content">
      <i class="fas fa-rocket"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="../_sources/notebooks/system_setup.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-access-to-a-linux-based-operating-system">
   Getting access to a Linux-based operating system
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-git-and-clone-the-course-material">
   Install Git and clone the course material
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-python">
   Install Python
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jupyter-labs">
   Jupyter labs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-paraview">
   Install ParaView
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-apptainer">
   Install Apptainer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-the-openfoam-pytorch-container">
   Build the OpenFOAM-PyTorch container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-the-basilisk-container">
   Build the Basilisk container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-install-visual-studio-code">
   Optional: install Visual Studio Code
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Setting up your system</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#getting-access-to-a-linux-based-operating-system">
   Getting access to a Linux-based operating system
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-git-and-clone-the-course-material">
   Install Git and clone the course material
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-python">
   Install Python
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#jupyter-labs">
   Jupyter labs
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-paraview">
   Install ParaView
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#install-apptainer">
   Install Apptainer
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-the-openfoam-pytorch-container">
   Build the OpenFOAM-PyTorch container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#build-the-basilisk-container">
   Build the Basilisk container
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-install-visual-studio-code">
   Optional: install Visual Studio Code
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <p><img alt="CC" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></p>
<p>This work is licensed under a <a class="reference external" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>
<p>Author(s): Andre Weiner</p>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-your-system">
<h1>Setting up your system<a class="headerlink" href="#setting-up-your-system" title="Permalink to this headline">#</a></h1>
<section id="getting-access-to-a-linux-based-operating-system">
<h2>Getting access to a Linux-based operating system<a class="headerlink" href="#getting-access-to-a-linux-based-operating-system" title="Permalink to this headline">#</a></h2>
<p>It is essential to have access to a Linux-based operating system (OS) to do the exercises. If you already do have access to Linux and know how to use it, feel free to skip the remainder of this section.</p>
<p>In principal, there are three ways to get access to Linux:</p>
<ol class="simple">
<li><p>Install Linux alongside your main OS. When starting up your device, you will be able to choose which OS to start via a so-called boot manager (typically <a class="reference external" href="https://www.gnu.org/software/grub/">Grub</a>). You get a fully functioning Linux installation that does not interfere with your main OS. The available storage of your hard drive will be split between both OSs according to your preferred ratio. I recommend to give the Linux partition at least 50GB of size.</p></li>
<li><p>Replace the main OS of your laptop or PC with Linux. Maybe you have an old laptop or workstation, which you don’t really need any longer for your day-to-day tasks.</p></li>
<li><p>Use Windows Subsystem for Linux (WSL); this option is the most convenient to set up, but the practical use is a little bit more challenging because the WSL does not have the full set of features and is slower than a native Linux installation. Moreover, it is important to use <strong>WSL 2</strong>.</p></li>
</ol>
<p>In any case, I recommend <a class="reference external" href="https://ubuntu.com/download/desktop">Ubuntu 22.04 LTS</a> as your first Linux-based OS. Find below several links that guide you through your preferred installation process.</p>
<ol class="simple">
<li><p><a class="reference external" href="https://itsfoss.com/install-ubuntu-1404-dual-boot-mode-windows-8-81-uefi/">installing Ubuntu alongside another OS</a></p></li>
<li><p><a class="reference external" href="https://ubuntu.com/tutorials/install-ubuntu-desktop#1-overview">installing Ubuntu as your only OS</a></p></li>
<li><p><a class="reference external" href="https://www.microsoft.com/en-us/p/ubuntu/9nblggh4msv6#activetab=pivot:overviewtab">installing Ubuntu via WSL</a></p></li>
</ol>
</section>
<section id="install-git-and-clone-the-course-material">
<h2>Install Git and clone the course material<a class="headerlink" href="#install-git-and-clone-the-course-material" title="Permalink to this headline">#</a></h2>
<p>You can install the version control tool <a class="reference external" href="https://en.wikipedia.org/wiki/Git">Git</a> via the command line by opening up a new terminal window (press Ctrl+Alt+T if you have a native installation) and typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">git</span>
</pre></div>
</div>
<p>If you start from a fresh installation and Git or other packages are not found in the list of available packages, you may have to update the package list by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">update</span>
</pre></div>
</div>
<p>Most likely, Git is already installed on your system. It is also good practice to set up your user name and email as the very first step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="s2">&quot;John Doe&quot;</span>
<span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="k">global</span> <span class="n">user</span><span class="o">.</span><span class="n">email</span> <span class="n">johndoe</span><span class="nd">@example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>You can read more on setting up Git in <a class="reference external" href="https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup">this article</a>. Now you are ready to clone the GitHub repository containing the course material. Navigate to the directory where you would like to keep the repository and run the clone command. Note that it is important to store the repository somewhere inside your <strong>home folder</strong>. Otherwise, you may encounter problems when working with the Apptainer images.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">AndreWeiner</span><span class="o">/</span><span class="n">ml</span><span class="o">-</span><span class="n">cfd</span><span class="o">-</span><span class="n">lecture</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>Now you can navigate into the repository and create a folder, in which to complete exercises:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span><span class="o">-</span><span class="n">lecture</span>
<span class="n">mkdir</span> <span class="n">exercises</span>
</pre></div>
</div>
<p>Note that the folder must be named exactly in this way because Git will ignore everything happening in that folder. You can create new files, notebooks, or simulations without interfering with the rest of the repository. Otherwise, you may get in trouble when pulling the latest updates from GitHub. Every once in a while, the remote repository (on GitHub) might change and you also want to update your local version of the repository. The command to receive the latest updates is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># you must be at the top-level of the ml-cfd-lecture repository before executing this command</span>
<span class="n">git</span> <span class="n">pull</span>
</pre></div>
</div>
<p>Now you already know enough about Git and GitHub to follow this course. However, if you would like to learn how powerful these tools really are, you can take <a class="reference external" href="https://github.com/skills/introduction-to-github">this free online course</a>.</p>
</section>
<section id="install-python">
<h2>Install Python<a class="headerlink" href="#install-python" title="Permalink to this headline">#</a></h2>
<p>By default, Ubuntu 22.04 is shipped with Python 3.10.6, but any version <span class="math notranslate nohighlight">\(\ge\)</span> 3.8 should work without problems. Python is a very popular programming language and maybe you are already using several Python libraries for other projects. To avoid version conflicts between the libraries used in this course and any other libraries installed in the past or future, we use a dedicated <a class="reference external" href="https://docs.python.org/3/library/venv.html">virtual environment</a>. Venv is available via the standard package manager:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">venv</span>
</pre></div>
</div>
<p>You may have several versions of the Python interpreter installed on your system. You can get a list of available versions by running the command <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-al</span> <span class="pre">/usr/bin/python3*</span></code>. To distinguish between different versions of the interpreter, the version is typically appended to the basename <em>python</em>, e.g., <em>python3.8</em>. In the latter case, replace the installation command above with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="mf">.8</span><span class="o">-</span><span class="n">venv</span>
</pre></div>
</div>
<p>To create a new environment called <em>ml-cfd</em>, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span>
<span class="c1"># or in case of python3.8</span>
<span class="n">python3</span><span class="mf">.8</span> <span class="o">-</span><span class="n">m</span> <span class="n">venv</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span>
</pre></div>
</div>
<p>The typical environment usage looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate the environment</span>
<span class="n">source</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="c1"># now are inside the environment and can install new libraries or run programs</span>
<span class="c1"># you should notice an additional (ml-cfd) prefix in the command line</span>
<span class="c1"># deactivate to leave the environment</span>
<span class="n">deactivate</span>
</pre></div>
</div>
<p>Moreover, we use a small tool called <em>pip</em> to install the required Python libraries from the Python Package Index (PyPI). To install pip, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">-</span><span class="n">pip</span>
</pre></div>
</div>
<p>The required packages for this course are listed in the file <em>requirements.txt</em>, and you can install all of them at once into the <em>ml-cfd</em> environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate the environment</span>
<span class="n">source</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="c1"># make sure that the latest version of pip is installed</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">pip</span>
<span class="c1"># install dependencies</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>To check if the installation was successful, type the following commands and observe if your output matches the one displayed below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span>
<span class="c1"># now you are in an interactive Python shell indicated by &gt;&gt;&gt;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="kn">import</span> <span class="nn">torch</span> <span class="k">as</span> <span class="nn">pt</span> <span class="c1"># press enter</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">pt</span><span class="o">.</span><span class="n">__version__</span>     <span class="c1"># press enter</span>
<span class="s1">&#39;1.12.1+cpu&#39;</span>           <span class="c1"># your output might vary slightly; the version should match</span>
<span class="c1"># to leave the Python shell, press Crtl+D</span>
</pre></div>
</div>
</section>
<section id="jupyter-labs">
<h2>Jupyter labs<a class="headerlink" href="#jupyter-labs" title="Permalink to this headline">#</a></h2>
<p>If you followed the instructions above, jupyter lab is already installed in the <em>ml-cfd</em> environment. To get a feeling for Jupyter labs, create a new Python 3 notebook and try to create and execute one code and one Markdown cell. Cells are executed by pressing Shift+Enter. You can change the cell type using the dropdown menu at the center-top of the notebook. Here are some commands to get you started:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate the Python environment</span>
<span class="n">source</span> <span class="n">ml</span><span class="o">-</span><span class="n">cfd</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">activate</span>
<span class="n">cd</span> <span class="n">exercises</span>
<span class="n">jupyter</span><span class="o">-</span><span class="n">lab</span>
<span class="c1"># now your web browser should open up</span>
<span class="c1"># 1. in the Notebook section, click on Python 3</span>
<span class="c1"># 2. in the file browser on the left side, right-click and the new notebook and rename it</span>
<span class="c1"># 3. change the type of the first cell to Markdown</span>
<span class="c1"># 4. type &#39;# My first Notebook&#39; and press Shift+Enter</span>
<span class="c1"># 5. in the next cell, type &#39;print(&quot;Hello Jupyter&quot;)&#39; and press Shift+Enter</span>
</pre></div>
</div>
<p>When working with WSL, the command to <a class="reference external" href="https://stackoverflow.com/questions/62353890/windows-subsystem-for-linux-wsl-2-and-jupyter-lab-how-to-open-a-jupyter-note">fire up a new notebook</a> is slightly more complex. You will start the notebook <strong>inside</strong> the WSL but display it in your default Windows web browser.</p>
</section>
<section id="install-paraview">
<h2>Install ParaView<a class="headerlink" href="#install-paraview" title="Permalink to this headline">#</a></h2>
<p>The installation of ParaView on Ubuntu is straightforward. Execute the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># deactivate the Python environment before running this command</span>
<span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">paraview</span>
</pre></div>
</div>
<p>When working with WSL, it is best to install ParaView directly on Windows. The executable can be downloaded <a class="reference external" href="https://www.paraview.org/paraview-downloads/download.php?submit=Download&amp;version=v5.10&amp;type=binary&amp;os=Linux&amp;downloadFile=ParaView-5.10.1-MPI-Linux-Python3.9-x86_64.tar.gz">here</a>. Since you are able to see the WSL files from Windows, you can navigate to the corresponding folder and start ParaView to post-process simulation data produced inside WSL.</p>
</section>
<section id="install-apptainer">
<h2>Install Apptainer<a class="headerlink" href="#install-apptainer" title="Permalink to this headline">#</a></h2>
<p>To install Apptainer, follow <a class="reference external" href="https://github.com/apptainer/apptainer/blob/main/INSTALL.md">these instruction</a> until completing the section <em>Compiling Apptainer</em>. You can skip the section <em>Install golangci-lint</em>. The installation guides you through the following steps:</p>
<ol class="simple">
<li><p>installation of dependencies available via the Ubuntu package manager</p></li>
<li><p>compiling Go (a programming language similar to C)</p></li>
<li><p>compiling Apptainer</p></li>
</ol>
<p>To check if the installation process went well, run the following command and see if you get the expected output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apptainer</span> <span class="n">pull</span> <span class="n">docker</span><span class="p">:</span><span class="o">//</span><span class="n">ghcr</span><span class="o">.</span><span class="n">io</span><span class="o">/</span><span class="n">apptainer</span><span class="o">/</span><span class="n">lolcow</span>
<span class="n">apptainer</span> <span class="n">run</span> <span class="n">lolcow_latest</span><span class="o">.</span><span class="n">sif</span>
<span class="c1">#</span>
<span class="c1"># this is the output you should see</span>
<span class="c1">#</span>
<span class="n">INFO</span><span class="p">:</span>    <span class="n">underlay</span> <span class="n">of</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">localtime</span> <span class="n">required</span> <span class="n">more</span> <span class="n">than</span> <span class="mi">50</span> <span class="p">(</span><span class="mi">77</span><span class="p">)</span> <span class="n">bind</span> <span class="n">mounts</span>
 <span class="n">_______________________________</span>
<span class="o">&lt;</span> <span class="n">Mon</span> <span class="n">Oct</span> <span class="mi">24</span> <span class="mi">10</span><span class="p">:</span><span class="mi">30</span><span class="p">:</span><span class="mi">02</span> <span class="n">CEST</span> <span class="mi">2022</span> <span class="o">&gt;</span>
 <span class="o">-------------------------------</span>
        \   <span class="o">^</span><span class="n">__</span><span class="o">^</span>
         \  <span class="p">(</span><span class="n">oo</span><span class="p">)</span>\<span class="n">_______</span>
            <span class="p">(</span><span class="n">__</span><span class="p">)</span>\       <span class="p">)</span>\<span class="o">/</span>\
                <span class="o">||----</span><span class="n">w</span> <span class="o">|</span>
                <span class="o">||</span>     <span class="o">||</span>

</pre></div>
</div>
<p>I recommend to go through the official <a class="reference external" href="https://apptainer.org/docs/user/main/quick_start.html">Quick Start</a> guide to learn the basics about interacting with Apptainer images.</p>
</section>
<section id="build-the-openfoam-pytorch-container">
<h2>Build the OpenFOAM-PyTorch container<a class="headerlink" href="#build-the-openfoam-pytorch-container" title="Permalink to this headline">#</a></h2>
<p>Next, we build the container with OpenFOAM-v2206 and the PyTorch-v1.12.1 C++ frontend installed and configured. Make sure you are at the top-level of the lecture repository before you run the command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apptainer</span> <span class="n">build</span> <span class="n">of2206</span><span class="o">-</span><span class="n">py1</span><span class="mf">.12.1</span><span class="o">-</span><span class="n">cpu</span><span class="o">.</span><span class="n">sif</span> <span class="n">docker</span><span class="p">:</span><span class="o">//</span><span class="n">andreweiner</span><span class="o">/</span><span class="n">of_pytorch</span><span class="p">:</span><span class="n">of2206</span><span class="o">-</span><span class="n">py1</span><span class="mf">.12.1</span><span class="o">-</span><span class="n">cpu</span>
</pre></div>
</div>
<p>This command should have generated a new file named <em>of2206-py1.12.1-cpu.sif</em>. To check if everything is working properly, type the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">apptainer</span> <span class="n">shell</span> <span class="n">of2206</span><span class="o">-</span><span class="n">py1</span><span class="mf">.12.1</span><span class="o">-</span><span class="n">cpu</span><span class="o">.</span><span class="n">sif</span>
<span class="c1">#</span>
<span class="c1"># now you are inside the container indicated by Singularity&gt;</span>
<span class="c1">#</span>
<span class="n">Apptainer</span><span class="o">&gt;</span> <span class="n">source</span> <span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">openfoam</span><span class="o">/</span><span class="n">openfoam2206</span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">bashrc</span>
<span class="n">Apptainer</span><span class="o">&gt;</span> <span class="n">simpleFoam</span> <span class="o">-</span><span class="n">help</span>
<span class="c1">#</span>
<span class="c1"># you should see the following output</span>
<span class="c1">#</span>
<span class="n">Usage</span><span class="p">:</span> <span class="n">simpleFoam</span> <span class="p">[</span><span class="n">OPTIONS</span><span class="p">]</span>
<span class="n">Options</span><span class="p">:</span>
  <span class="o">-</span><span class="n">case</span> <span class="o">&lt;</span><span class="nb">dir</span><span class="o">&gt;</span>       <span class="n">Specify</span> <span class="n">case</span> <span class="n">directory</span> <span class="n">to</span> <span class="n">use</span> <span class="p">(</span><span class="n">instead</span> <span class="n">of</span> <span class="n">cwd</span><span class="p">)</span>
  <span class="o">-</span><span class="n">decomposeParDict</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;</span>
                    <span class="n">Use</span> <span class="n">specified</span> <span class="n">file</span> <span class="k">for</span> <span class="n">decomposePar</span> <span class="n">dictionary</span>
  <span class="o">-</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span>          <span class="n">Check</span> <span class="n">case</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="n">only</span> <span class="n">using</span> <span class="n">a</span> <span class="n">single</span> <span class="n">time</span> <span class="n">step</span>
  <span class="o">-</span><span class="n">dry</span><span class="o">-</span><span class="n">run</span><span class="o">-</span><span class="n">write</span>    <span class="n">Check</span> <span class="n">case</span> <span class="nb">set</span><span class="o">-</span><span class="n">up</span> <span class="ow">and</span> <span class="n">write</span> <span class="n">only</span> <span class="n">using</span> <span class="n">a</span> <span class="n">single</span> <span class="n">time</span> <span class="n">step</span>
  <span class="o">-</span><span class="n">parallel</span>         <span class="n">Run</span> <span class="ow">in</span> <span class="n">parallel</span>
  <span class="o">-</span><span class="n">postProcess</span>      <span class="n">Execute</span> <span class="n">functionObjects</span> <span class="n">only</span>
  <span class="o">-</span><span class="n">doc</span>              <span class="n">Display</span> <span class="n">documentation</span> <span class="ow">in</span> <span class="n">browser</span>
  <span class="o">-</span><span class="n">help</span>             <span class="n">Display</span> <span class="n">short</span> <span class="n">help</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">-</span><span class="n">help</span><span class="o">-</span><span class="n">full</span>        <span class="n">Display</span> <span class="n">full</span> <span class="n">help</span> <span class="ow">and</span> <span class="n">exit</span>

<span class="n">Steady</span><span class="o">-</span><span class="n">state</span> <span class="n">solver</span> <span class="k">for</span> <span class="n">incompressible</span><span class="p">,</span> <span class="n">turbulent</span> <span class="n">flows</span><span class="o">.</span>

<span class="n">Using</span><span class="p">:</span> <span class="n">OpenFOAM</span><span class="o">-</span><span class="mi">2206</span> <span class="p">(</span><span class="mi">2206</span><span class="p">)</span> <span class="o">-</span> <span class="n">visit</span> <span class="n">www</span><span class="o">.</span><span class="n">openfoam</span><span class="o">.</span><span class="n">com</span>
<span class="n">Build</span><span class="p">:</span> <span class="n">_76d719d1</span><span class="o">-</span><span class="mi">20220624</span>
<span class="n">Arch</span><span class="p">:</span>  <span class="n">LSB</span><span class="p">;</span><span class="n">label</span><span class="o">=</span><span class="mi">32</span><span class="p">;</span><span class="n">scalar</span><span class="o">=</span><span class="mi">64</span>
<span class="c1">#</span>
<span class="c1"># to leave the container, type exit</span>
<span class="c1">#</span>
<span class="n">Apptainer</span><span class="o">&gt;</span> <span class="n">exit</span>
</pre></div>
</div>
<p>If you want to learn more about how the container was built, check out <a class="reference external" href="https://github.com/AndreWeiner/of_pytorch_docker">this repository</a>.</p>
</section>
<section id="build-the-basilisk-container">
<h2>Build the Basilisk container<a class="headerlink" href="#build-the-basilisk-container" title="Permalink to this headline">#</a></h2>
<p>Building the Basilisk container works the same way as in the previous section. Run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apptainer</span> <span class="n">build</span> <span class="n">basilisk</span><span class="o">.</span><span class="n">sif</span> <span class="n">docker</span><span class="p">:</span><span class="o">//</span><span class="n">andreweiner</span><span class="o">/</span><span class="n">basilisk</span><span class="p">:</span><span class="mi">20</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">19</span>
</pre></div>
</div>
<p>You should now see a new file called <em>basilisk.sif</em>.</p>
</section>
<section id="optional-install-visual-studio-code">
<h2>Optional: install Visual Studio Code<a class="headerlink" href="#optional-install-visual-studio-code" title="Permalink to this headline">#</a></h2>
<p>A good code editor can make your life significantly easier. VS code is an open-source editor with an excellent package management system to install extensions for different types of technologies and programming languages. The editor also makes suggestions for completion as you start to write code, shows the code’s documentation, and indicates potential issues even before you compile or execute the program (a process called <em>linting</em>). To install VS code on Ubuntu, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">snap</span> <span class="n">install</span> <span class="o">--</span><span class="n">classic</span> <span class="n">code</span>
</pre></div>
</div>
<p>Setting up VS code in WSL is slightly more complex. Instructions can be found <a class="reference external" href="https://code.visualstudio.com/docs/remote/wsl">here</a>.</p>
<p>To start VS code, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">code</span> <span class="o">.</span>
</pre></div>
</div>
<p>It is definitely useful to go to the <em>Extensions</em> tab (press Ctrl+Shift+X) and to install the plugins:</p>
<ul class="simple">
<li><p>Python</p></li>
<li><p>Jupyter</p></li>
<li><p>Code Spell Checker</p></li>
</ul>
<p><strong>Congratulations! This completes the first exercise. Now you are ready to get started with CFD and ML</strong></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="python_intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">A brief introduction to Python programming</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="cfd_intro_exercise.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">End-to-end simulations in OpenFOAM and Basilisk</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By AndreWeiner, converted by thangckt<br/>
  
      &copy; Copyright 2022.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>